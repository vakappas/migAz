<NetworkSecurityGroup>
  <Name>asmnsg</Name>
  <Location>East US</Location>
  <State>Created</State>
  <Rules>
    <Rule>
      <Name>Enable Internal DNS</Name>
      <Type>Inbound</Type>
      <Priority>100</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>VIRTUAL_NETWORK</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>10.1.1.1</DestinationAddressPrefix>
      <DestinationPortRange>53</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
    </Rule>
    <Rule>
      <Name>Port 7777 rule</Name>
      <Type>Inbound</Type>
      <Priority>110</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>VIRTUAL_NETWORK</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>10.1.1.1</DestinationAddressPrefix>
      <DestinationPortRange>7777</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
    </Rule>
    <Rule>
      <Name>ALLOW VNET OUTBOUND</Name>
      <Type>Outbound</Type>
      <Priority>65000</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>VIRTUAL_NETWORK</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>VIRTUAL_NETWORK</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
    <Rule>
      <Name>ALLOW VNET INBOUND</Name>
      <Type>Inbound</Type>
      <Priority>65000</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>VIRTUAL_NETWORK</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>VIRTUAL_NETWORK</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
    <Rule>
      <Name>ALLOW INTERNET OUTBOUND</Name>
      <Type>Outbound</Type>
      <Priority>65001</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>*</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>INTERNET</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
    <Rule>
      <Name>ALLOW AZURE LOAD BALANCER INBOUND</Name>
      <Type>Inbound</Type>
      <Priority>65001</Priority>
      <Action>Allow</Action>
      <SourceAddressPrefix>AZURE_LOADBALANCER</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>*</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
    <Rule>
      <Name>DENY ALL OUTBOUND</Name>
      <Type>Outbound</Type>
      <Priority>65500</Priority>
      <Action>Deny</Action>
      <SourceAddressPrefix>*</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>*</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
    <Rule>
      <Name>DENY ALL INBOUND</Name>
      <Type>Inbound</Type>
      <Priority>65500</Priority>
      <Action>Deny</Action>
      <SourceAddressPrefix>*</SourceAddressPrefix>
      <SourcePortRange>*</SourcePortRange>
      <DestinationAddressPrefix>*</DestinationAddressPrefix>
      <DestinationPortRange>*</DestinationPortRange>
      <Protocol>*</Protocol>
      <State>Active</State>
      <IsDefault>true</IsDefault>
    </Rule>
  </Rules>
</NetworkSecurityGroup>